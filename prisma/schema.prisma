generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum Role {
  super_user
  user
}

model User {
  id            String        @id @default(cuid())
  email         String        @unique
  firstname     String        @db.VarChar(20)
  avatar        String?
  password      String?
  lastname      String?       @db.VarChar(20)
  fullname      String?       @db.VarChar(40)
  provider      String?
  role          Role          @default(user)
  created_at    DateTime      @default(now())
  updated_at    DateTime      @updatedAt
  order_details OrderDetail[]
}

model Item {
  id              String        @id @default(cuid())
  title           String        @db.VarChar(50)
  image_url       String        @db.Text
  price           Int
  stock           Int
  unlimited_stock Boolean
  seller_name     String
  sku_code        String
  created_at      DateTime      @default(now())
  updated_at      DateTime      @updatedAt
  order_details   OrderDetail[]
  category_id     String
  category        Category      @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
}

enum Status {
  pending
  paid
  expired
  failed
  cancelled
}

model OrderDetail {
  id             String   @id @default(cuid())
  transaction_id String   @unique
  amount         Int
  phone_number   String
  status         Status
  qris_url       String
  qris_string    String
  expires_at     String
  paid_at        String?
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt
  user_id        String
  user           User     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
  item_id        String
  item           Item     @relation(fields: [item_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
}

model News {
  id         String   @id @default(cuid())
  image_url  String   @db.Text
  title      String
  content    String   @db.Text
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
}

enum Type {
  credit
  quota
  games
  bill
}

model Category {
  id             String   @id @default(cuid())
  title          String
  studio         String
  image_url      String
  cover_url      String
  column_1       Boolean  @default(true)
  column_2       Boolean
  column_1_title String
  column_2_title String
  type           Type
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt
  items          Item[]
}
